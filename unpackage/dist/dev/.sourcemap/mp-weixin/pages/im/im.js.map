{"version":3,"sources":["webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/main.js","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?47aa","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?e362","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?833c","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?f0ad","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?8cf3","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?dcb9","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?5460","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?dda8","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?ba03","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue?d013","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?a98f","webpack:///F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue?7520"],"names":["Page","App"],"mappings":";;;;;;;;;;AAAA;AACA;AACI,mF;AACAA,IAAI,CAAC,+BAAYC,WAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiF;AAC3B;AACL;AACa;;;AAG9D;AACgK;AAChK,gBAAgB,4KAAU;AAC1B,EAAE,wEAAM;AACR,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,qBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA,gBAAgB,6CAA6C;AAC7D,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA,oBAAoB,6CAA6C;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD,qBAAqB;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,wBAAwB,SAAS,eAAe,EAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,sBAAsB;AAC7B;AACA;AACA,kBAAkB,+CAA+C;AACjE,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAq5B,CAAgB,05BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuBz6B;AACA;AACA;AACA;AACA;AACA,+E;;AAEA;AACA,MADA,kBACA;AACA;AACA,cADA;AAEA,iBAFA,EAEA;AACA,iBAHA;AAIA,iBAJA,EAIA;AACA,qBALA;AAMA,gBANA;AAOA;AACA,qBADA;AAEA,4BAFA;AAGA,0BAHA;AAIA,sBAJA,EAPA;;AAaA,kBAbA;AAcA;AACA,gBADA;AAEA,kBAFA,EAdA;;AAkBA,kBAlBA;;AAoBA,GAtBA;AAuBA;AACA,iCADA;AAEA,qCAFA,EAvBA;;AA2BA,QA3BA,kBA2BA,CA3BA,EA2BA;AACA;AACA;AACA,2BADA;AAEA,aAFA,qBAEA;AACA;AACA,OAJA;AAKA,UALA,kBAKA;AACA;AACA;AACA,qBADA;AAEA,uDAFA;AAGA;AACA;AACA;AACA,uBADA,mBACA,GADA,EACA;AACA;AACA,iBAHA;AAIA,oBAJA,gBAIA,GAJA,EAIA;AACA;AACA,iBANA;;AAQA,aATA,MASA;AACA;AACA;AACA,WAhBA;;AAkBA,OAzBA;;AA2BA;AACA,2BADA;AAEA,gCAFA;AAGA;AACA;AACA,OALA;;;AAQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA;AAQA;;AAEA;AACA,2BADA;;AAGA;AACA;AACA,2GA7DA,CA6DA;AACA;AACA;AACA,GA3FA;;AA6FA,QA7FA,oBA6FA;AACA;AACA;AACA;AACA,GAjGA;AAkGA;AACA;AACA,eAFA,yBAEA;AACA;AACA,qBADA;AAEA,oBAFA;AAGA,uBAHA;;;AAMA;AACA,qDADA;AAEA,qBAFA;AAGA;AACA,iDADA;AAEA,6BAFA;AAGA,gCAHA,EAHA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA,CADA,CACA,IADA,WACA,IADA,WACA,OADA,WACA,QADA,WACA,QADA;;AAIA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA;AACA;AACA,eALA,MAKA;AACA,+BADA;AAEA;AACA,6BADA;AAEA;AACA;;AAEA;AACA,0BADA;AAEA,0BAFA;AAGA,gCAHA;AAIA,kCAJA;AAKA,kCALA;;AAOA;AACA;AACA,WA/BA,MA+BA;AACA;AACA,8BADA;AAEA,0BAFA;;AAIA;;AAEA,SA/CA;;;AAkDA,KA3DA;;AA6DA,mBA7DA,2BA6DA,OA7DA,EA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA,wCADA;AAEA,wBAFA;;AAIA;AACA;;AAEA,OAbA,MAaA;AACA;AACA,+BADA;AAEA,sBAFA;;;AAKA;AACA,KAnFA;AAoFA,cApFA,4GAoFA,IApFA,EAoFA,IApFA,EAoFA,OApFA,EAoFA,GApFA;AAqFA,mBArFA,GAqFA;AACA,wCADA;AAEA,kCAFA,EArFA;;AAyFA,8CAzFA;;AA2FA,yCA3FA,SA2FA,IA3FA;AA4FA,6CA5FA,SA4FA,UA5FA;AA6FA,gDA7FA;AA8FA,8CA9FA,UA8FA,QA9FA;AA+FA;AACA;AACA,qBADA,GACA,uBADA;AAEA,0BAFA,GAEA,sBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCADA;AAEA,gCAFA;AAGA,sCAHA;AAIA,wCAJA;AAKA,wCALA;;AAOA;AACA,iBAlBA;;;AAqBA;AACA,0DADA;AAEA,sDAFA,IA3HA;;;;;AAkIA,kBAlIA,4BAkIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA,OARA;AASA,KAjJA,EAlGA;;AAqPA;AACA;AACA;AACA,KAHA,EArPA,E;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwF;AAC3B;AACL;AACa;;;AAGrE;AACgK;AAChK,gBAAgB,4KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA,SAAS,qBAAqB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,6BAA6B,wBAAwB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa,SAAS,wBAAwB,OAAO,oBAAoB,EAAE;AAC3E;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC,gBAAgB,6BAA6B;AAC7C;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClJA;AAAA;AAAA;AAAA;AAA45B,CAAgB,i6BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsCh7B;AACA;AACA,+F;;AAEA,+C;AACA;AACA,oBADA;AAEA;AACA,6BADA,EAFA;;AAKA,MALA,kBAKA;AACA;AACA,oBADA;AAEA,mBAFA;AAGA,mBAHA;AAIA,mBAJA;AAKA,qBALA;AAMA,sBANA,EAMA;AACA,kBAPA,EAOA;AACA,gBARA,EAQA;AACA,iBATA,CASA;AATA;AAWA,GAjBA;AAkBA,QAlBA,oBAkBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA,iCADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA,OAbA,MAaA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA,KA3BA;AA4BA,GAhDA;AAiDA;AACA,QADA,kBACA;AACA;AACA,KAHA;AAIA;AACA,aALA,uBAKA;AACA;AACA,mBADA;AAEA,yBAFA;AAGA;AACA;AACA;AACA,0BADA;AAEA,0BAFA;AAGA,gCAHA;;AAKA;AACA,WAPA,MAOA;AACA;AACA,2BADA;AAEA,0BAFA;;AAIA;AACA,SAjBA;;AAmBA,KAzBA;;AA2BA,SA3BA;AA4BA,4CA5BA,SA4BA,GA5BA;AA6BA,qBA7BA,GA6BA;AACA,8BADA;AAEA,+BAFA;AAGA,8BAHA,EA7BA;;AAkCA,uCAlCA;;AAoCA,SApCA;AAqCA,4CArCA,SAqCA,GArCA;AAsCA;AACA;AACA,yBADA,GACA;AACA,gCADA;AAEA,mCAFA;AAGA,4CAHA,EADA;;AAMA;AACA,iBA9CA;;AAgDA,eAhDA;AAiDA,0DAjDA,SAiDA,GAjDA,mBAiDA;AACA,qBAlDA,GAkDA;AACA,8BADA;AAEA,+BAFA;AAGA,gDAHA,EAlDA;;;AAwDA,uCAxDA;;AA0DA,kBA1DA,0BA0DA,CA1DA,EA0DA;AACA;AACA,2BADA;AAEA,oBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA,6BADA;AAEA,eAFA,qBAEA;AACA;AACA;AACA,2BADA;;AAGA,SAPA;AAQA,YARA,kBAQA;AACA;AACA;AACA,uBADA;AAEA,yDAFA;AAGA;AACA;AACA;AACA,yBADA,mBACA,GADA,EACA;AACA;AACA,mBAHA;AAIA,sBAJA,gBAIA,GAJA,EAIA;AACA;AACA,mBANA;;AAQA,eATA,MASA;AACA;AACA;AACA,aAhBA;;AAkBA,SA5BA;;AA8BA,KAhGA;AAiGA,gBAjGA,wBAiGA,CAjGA,EAiGA;AACA,iDADA,CACA;AACA;AACA;AACA;AACA,KAtGA;;AAwGA,YAxGA,sBAwGA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA,OANA,MAMA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;AAGA,kCAHA;;AAKA;AACA;AACA,KAzHA;AA0HA,cA1HA,sBA0HA,GA1HA,EA0HA;AACA;AACA;AACA,oBADA;AAEA,sBAFA;AAGA,4BAHA;;AAKA;AACA,KAlIA,EAjDA,E;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAA2hC,CAAgB,uhCAAG,EAAC,C;;;;;;;;;;;ACA/iC,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAohC,CAAgB,ghCAAG,EAAC,C;;;;;;;;;;;ACAxiC,uC","file":"pages/im/im.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/im/im.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./im.vue?vue&type=template&id=051cf7b8&\"\nimport script from \"./im.vue?vue&type=script&lang=js&\"\nexport * from \"./im.vue?vue&type=script&lang=js&\"\nimport style0 from \"./im.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('051cf7b8', component.options)\n    } else {\n      api.reload('051cf7b8', component.options)\n    }\n    module.hot.accept(\"./im.vue?vue&type=template&id=051cf7b8&\", function () {\n      api.rerender('051cf7b8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/pages/im/im.vue\"\nexport default component.exports","export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./im.vue?vue&type=template&id=051cf7b8&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"uni-column\" }, [\n    _c(\n      \"view\",\n      {\n        staticClass: \"content\",\n        style: { height: _vm.style.contentViewHeight + \"px\" },\n        attrs: { id: \"content\" }\n      },\n      [\n        _c(\n          \"scroll-view\",\n          {\n            style: { height: _vm.style.contentViewHeight + \"px\" },\n            attrs: {\n              id: \"scrollview\",\n              \"scroll-y\": \"true\",\n              \"scroll-with-animation\": true,\n              \"scroll-top\": _vm.scrollTop\n            }\n          },\n          [\n            _c(\n              \"view\",\n              {\n                staticClass: \"history\",\n                attrs: { eventid: \"67283716-0\" },\n                on: { tap: _vm.history_msg }\n              },\n              [_c(\"text\", [_vm._v(\"点击获取历史消息\")])]\n            ),\n            _vm._l(_vm.history, function(message, index) {\n              return _c(\"message-show\", {\n                key: index,\n                attrs: {\n                  avatar: _vm.avatar,\n                  home: _vm.home,\n                  message: message,\n                  id: index,\n                  name: _vm.name,\n                  mpcomid: \"67283716-0-\" + index\n                }\n              })\n            }),\n            _vm._l(_vm.messages, function(message, index) {\n              return _c(\"message-show\", {\n                key: index,\n                attrs: {\n                  avatar: _vm.avatar,\n                  home: _vm.home,\n                  message: message,\n                  id: index,\n                  name: _vm.name,\n                  mpcomid: \"67283716-1-\" + index\n                }\n              })\n            }),\n            _c(\"view\", { attrs: { id: \"bottom\" } })\n          ],\n          2\n        )\n      ],\n      1\n    ),\n    _c(\n      \"view\",\n      { staticClass: \"foot\" },\n      [\n        _c(\"chat-input\", {\n          attrs: { eventid: \"67283716-1\", mpcomid: \"67283716-2\" },\n          on: { \"send-message\": _vm.getInputMessage }\n        })\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./im.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./im.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"uni-column\">\r\n\t\t<view class=\"content\" id=\"content\" :style=\"{ height: style.contentViewHeight + 'px' }\">\r\n\t\t\t<scroll-view id=\"scrollview\" scroll-y=\"true\" :style=\"{ height: style.contentViewHeight + 'px' }\"\r\n\t\t\t :scroll-with-animation=\"true\" :scroll-top=\"scrollTop\">\r\n\t\t\t\t<view class=\"history\" @tap=\"history_msg\">\r\n\t\t\t\t\t<text>点击获取历史消息</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<message-show v-for=\"(message, index) in history\" :avatar=\"avatar\" :key=\"index\" :home=\"home\" :message=\"message\" :id=\"index\"\r\n\t\t\t\t :name=\"name\"></message-show>\r\n\t\t\t\t<message-show v-for=\"(message, index) in messages\" :avatar=\"avatar\" :key=\"index\" :home=\"home\" :message=\"message\"\r\n\t\t\t\t :id=\"index\" :name=\"name\"></message-show>\r\n\t\t\t\t<view id=\"bottom\"></view>\r\n\t\t\t</scroll-view>\r\n\r\n\t\t</view>\r\n\t\t<view class=\"foot\">\r\n\t\t\t<chat-input @send-message=\"getInputMessage\"></chat-input>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport chatInput from '../../components/im-chat/chatinput.vue';\r\n\timport messageShow from '../../components/im-chat/messageshow.vue';\r\n\timport all from '../../common/global.js';\r\n\timport kf from '../../common/kf.js';\r\n\timport util from '../../utils/util.js'\r\n\timport cfg from '../../cfg.js'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tname: '',\r\n\t\t\t\tmsg_item: 0, //渲染历史记录\r\n\t\t\t\thistory: [],\r\n\t\t\t\tchat_id: '', //对方的id\r\n\t\t\t\tchat_openid: '',\r\n\t\t\t\tavatar: '',\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tpageHeight: 0,\r\n\t\t\t\t\tcontentViewHeight: 0,\r\n\t\t\t\t\tfootViewHeight: 90,\r\n\t\t\t\t\tmitemHeight: 0\r\n\t\t\t\t},\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\thome: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tavatar: ''\r\n\t\t\t\t},\r\n\t\t\t\tmessages: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tchatInput,\r\n\t\t\tmessageShow\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t//获取麦克风权限\r\n\t\t\tuni.authorize({\r\n\t\t\t\tscope: 'scope.record',\r\n\t\t\t\tsuccess() {\r\n\t\t\t\t\tconsole.log('录音功能已开启');\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tconsole.log('没授权');\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '没有麦克风权限，按确定进入设置页面，打开麦克风权限，方可使用语音功能',\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res.authSetting);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuni.setNavigationBarColor({\r\n\t\t\t\tfrontColor: '#ffffff',\r\n\t\t\t\tbackgroundColor: '#EFC5C9',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log(\"nav\",res)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tthis.name = all.globalData.user.name\r\n\t\t\tconsole.log(\"姓名\", this.name)\r\n\t\t\tthis.avatar = all.globalData.user.avata\r\n\r\n\t\t\tlet chat_id = e.chat_id;\r\n\t\t\tthis.chat_id = chat_id;\r\n\t\t\tconsole.log('对方id为', chat_id);\r\n\t\t\t//对方的信息\r\n\t\t\tconsole.log(\"顾问所有消息\", all.globalData.msg)\r\n\t\t\tall.globalData.msg.some(item => {\r\n\t\t\t\tif (item.user_id == chat_id) {\r\n\t\t\t\t\tthis.chat_openid = item.openid\r\n\t\t\t\t\tthis.messages = item.user_content.contents;\r\n\t\t\t\t\tthis.home.name = item.user_content.name;\r\n\t\t\t\t\tthis.home.avatar = item.user_content.avatar;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log('顾问消息记录', this.messages);\r\n\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: this.home.name\r\n\t\t\t});\r\n\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\tthis.style.pageHeight = res.windowHeight;\r\n\t\t\tthis.style.contentViewHeight = res.windowHeight - 80 - uni.getSystemInfoSync().screenWidth / 750 * (100); //像素\r\n\t\t\t//滑动到底端\r\n\t\t\tthis.scrollTop = 3000\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tif (all.globalData.reconnect) {\r\n\t\t\t\tkf.re_send()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//获取历史消息\r\n\t\t\thistory_msg() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '正在加载',\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\tduration: 90000\r\n\t\t\t\t});\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: cfg.qjUrl + \"chat/record.tio_x\",\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuid: all.globalData.user_id,\r\n\t\t\t\t\t\ttouid: this.chat_id,\r\n\t\t\t\t\t\tpageNum: this.msg_item\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data[0].ok != 1) {\r\n\t\t\t\t\t\t\tthis.msg_item++\r\n\t\t\t\t\t\t\tconsole.log(\"历史消息\", res.data)\r\n\t\t\t\t\t\t\tfor (var i = 0; i < res.data.length; i++) {\r\n\t\t\t\t\t\t\t\tlet [user, type, content, now_time, duration] = [res.data[i].uid, res.data[i].contenttype, res.data[i].fiter_content,\r\n\t\t\t\t\t\t\t\t\tres.data[i].time\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\tuser = user == this.chat_id ? \"home\" : \"customer\"\r\n\t\t\t\t\t\t\t\tif (type == 1)\r\n\t\t\t\t\t\t\t\t\ttype = \"text\"\r\n\t\t\t\t\t\t\t\telse if (type == 4) {\r\n\t\t\t\t\t\t\t\t\ttype = \"voice\"\r\n\t\t\t\t\t\t\t\t\tlet num = content.indexOf(\"http\")\r\n\t\t\t\t\t\t\t\t\tduration = content.substr(0, num)\r\n\t\t\t\t\t\t\t\t\tcontent = content.substr(num, content.length)\r\n\t\t\t\t\t\t\t\t} else if (type == 6)\r\n\t\t\t\t\t\t\t\t\ttype = \"picture\"\r\n\t\t\t\t\t\t\t\telse if (type == 5)\r\n\t\t\t\t\t\t\t\t\ttype = \"video\"\r\n\t\t\t\t\t\t\t\telse if (type == 0)\r\n\t\t\t\t\t\t\t\t\ttype = \"text\"\r\n\r\n\t\t\t\t\t\t\t\tthis.history.unshift({\r\n\t\t\t\t\t\t\t\t\tuser,\r\n\t\t\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\t\t\tcontent,\r\n\t\t\t\t\t\t\t\t\tduration,\r\n\t\t\t\t\t\t\t\t\tnow_time\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.hideToast()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"无更多历史消息\",\r\n\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\tgetInputMessage(message) {\r\n\t\t\t\t//判断是否掉线\r\n\t\t\t\tif (!all.globalData.level) {\r\n\t\t\t\t\tif (!all.globalData.reconnect) {\r\n\t\t\t\t\t\t//获取子组件的输入数据\r\n\t\t\t\t\t\tconsole.log('发送的消息', message);\r\n\t\t\t\t\t\tthis.addMessage('customer', message.type, message.content, message.str);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"发送失败，请重新登陆或等待两分钟再重试\",\r\n\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tkf.re_send()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"发送失败，账号在别处登陆\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync addMessage(user, type, content, str) {\r\n\t\t\t\tvar req = {\r\n\t\t\t\t\ttoId: this.chat_openid,\r\n\t\t\t\t\tcontent\r\n\t\t\t\t};\r\n\t\t\t\tkf.sendmsg(req, str);\r\n\r\n\t\t\t\tlet time = await (util.nowtime())\r\n\t\t\t\tlet range_time = await (util.timeago(time))\r\n\t\t\t\tconsole.log(\"时间间隔\", range_time)\r\n\t\t\t\tlet now_time = await (util.now_time(time))\r\n\t\t\t\tconsole.log(\"现在的时间\", now_time)\r\n\t\t\t\tif (type == 'voice') {\r\n\t\t\t\t\tlet num = content.indexOf(\"http\")\r\n\t\t\t\t\tvar duration = content.substr(0, num)\r\n\t\t\t\t\tcontent = content.substr(num, content.length)\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideToast();\r\n\t\t\t\tall.globalData.msg.some((item) => {\r\n\t\t\t\t\tif (item.user_id == this.chat_id) {\r\n\t\t\t\t\t\tconsole.log(\"发送消息\", item)\r\n\t\t\t\t\t\titem.user_content.time = time\r\n\t\t\t\t\t\titem.user_content.range_time = range_time\r\n\t\t\t\t\t\t//本地只保存最近20条消息，剩余通过请求获得\r\n\r\n\t\t\t\t\t\twhile (item.user_content.contents.length > 19) {\r\n\t\t\t\t\t\t\titem.user_content.contents.shift()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.user_content.contents.push({\r\n\t\t\t\t\t\t\tuser,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tcontent,\r\n\t\t\t\t\t\t\tduration,\r\n\t\t\t\t\t\t\tnow_time\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: all.globalData.local_id,\r\n\t\t\t\t\tdata: all.globalData.msg,\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar query = uni.createSelectorQuery();\r\n\t\t\t\tquery.selectAll('.m-item').boundingClientRect();\r\n\t\t\t\tquery.select('#scrollview').boundingClientRect();\r\n\r\n\t\t\t\tquery.exec(function(res) {\r\n\t\t\t\t\tthat.style.mitemHeight = 0;\r\n\t\t\t\t\tres[0].forEach(function(rect) {\r\n\t\t\t\t\t\tthat.style.mitemHeight = that.style.mitemHeight + rect.height + 50;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (that.style.mitemHeight > that.style.contentViewHeight) {\r\n\t\t\t\t\t\tthat.scrollTop = that.style.mitemHeight - that.style.contentViewHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tmessages: function() {\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t\r\n\t.foot {\r\n\t\twidth: 100%;\r\n\t\t\r\n\t}\r\n\r\n\t.history {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.history text {\r\n\t\tmargin-top: 30upx;\r\n\t\tpadding: 10upx;\r\n\t\tfont-size: 26upx;\r\n\t\tbackground-color: #E5E5E5;\r\n\t\tborder-radius: 10upx;\r\n\t}\r\n</style>\n","import { render, staticRenderFns } from \"./chatinput.vue?vue&type=template&id=23fe43e7&\"\nimport script from \"./chatinput.vue?vue&type=script&lang=js&\"\nexport * from \"./chatinput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatinput.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('23fe43e7', component.options)\n    } else {\n      api.reload('23fe43e7', component.options)\n    }\n    module.hot.accept(\"./chatinput.vue?vue&type=template&id=23fe43e7&\", function () {\n      api.rerender('23fe43e7', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/Ten/WeGame/Document download/WeChat Files/WXID_99Ake/FileStorage/File/2019-08/qj_consult/qj_consult/components/im-chat/chatinput.vue\"\nexport default component.exports","export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatinput.vue?vue&type=template&id=23fe43e7&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", [\n    _c(\"view\", { staticClass: \"footer\" }, [\n      _c(\n        \"view\",\n        { staticClass: \"com\" },\n        [\n          _vm.more_input\n            ? _c(\"view\", [\n                _c(\"input\", {\n                  directives: [\n                    {\n                      name: \"model\",\n                      rawName: \"v-model\",\n                      value: _vm.inputValue,\n                      expression: \"inputValue\"\n                    }\n                  ],\n                  attrs: {\n                    type: \"text\",\n                    placeholder: \"输入要发送的内容\",\n                    \"cursor-spacing\": \"55\",\n                    eventid: \"db14ccce-0\"\n                  },\n                  domProps: { value: _vm.inputValue },\n                  on: {\n                    input: function($event) {\n                      if ($event.target.composing) {\n                        return\n                      }\n                      _vm.inputValue = $event.target.value\n                    }\n                  }\n                })\n              ])\n            : _vm._e(),\n          _c(\n            \"button\",\n            { attrs: { eventid: \"db14ccce-1\" }, on: { tap: _vm.sendtext } },\n            [\n              _c(\"image\", {\n                attrs: { src: \"../../static/image/send.png\", mode: \"\" }\n              })\n            ]\n          )\n        ],\n        1\n      )\n    ]),\n    _c(\"view\", { staticClass: \"line\" }),\n    _c(\"view\", { staticClass: \"footer-left\" }, [\n      _c(\n        \"view\",\n        {\n          staticClass: \"func\",\n          attrs: { eventid: \"db14ccce-2\" },\n          on: {\n            touchstart: _vm.startRecognize,\n            touchend: _vm.endRecognize,\n            touchmove: _vm.move\n          }\n        },\n        [\n          _c(\n            \"button\",\n            [\n              _c(\"uni-icon\", {\n                attrs: { type: \"mic-filled\", size: \"30\", mpcomid: \"db14ccce-0\" }\n              })\n            ],\n            1\n          ),\n          _c(\"text\", [_vm._v(\"语音\")])\n        ],\n        1\n      ),\n      _c(\n        \"view\",\n        {\n          staticClass: \"func\",\n          attrs: { eventid: \"db14ccce-3\" },\n          on: { tap: _vm.image }\n        },\n        [\n          _c(\n            \"button\",\n            [\n              _c(\"uni-icon\", {\n                attrs: { type: \"image\", size: \"30\", mpcomid: \"db14ccce-1\" }\n              })\n            ],\n            1\n          ),\n          _c(\"text\", [_vm._v(\"图片\")])\n        ],\n        1\n      ),\n      _c(\n        \"view\",\n        {\n          staticClass: \"func\",\n          attrs: { eventid: \"db14ccce-4\" },\n          on: { tap: _vm.video }\n        },\n        [\n          _c(\n            \"button\",\n            [\n              _c(\"uni-icon\", {\n                attrs: { type: \"videocam\", size: \"30\", mpcomid: \"db14ccce-2\" }\n              })\n            ],\n            1\n          ),\n          _c(\"text\", [_vm._v(\"视频\")])\n        ],\n        1\n      ),\n      _c(\n        \"view\",\n        {\n          staticClass: \"func\",\n          attrs: { eventid: \"db14ccce-5\" },\n          on: { tap: _vm.closechat }\n        },\n        [\n          _c(\n            \"button\",\n            [\n              _c(\"uni-icon\", {\n                attrs: { type: \"close\", size: \"30\", mpcomid: \"db14ccce-3\" }\n              })\n            ],\n            1\n          ),\n          _c(\"text\", [_vm._v(\"结束\")])\n        ],\n        1\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatinput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatinput.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view class=\"com\">\r\n\t\t\t\t<view v-if=\"more_input\"><input type=\"text\" placeholder=\"输入要发送的内容\" v-model=\"inputValue\" cursor-spacing=\"55\" /></view>\r\n\t\t\t\t<!-- <view v-else><textarea type=\"text\" v-model=\"inputValue\" :show-confirm-bar=\"show_bar\" placeholder-style=\"color:#BFBFBF;\" cursor-spacing=\"65\" /></view> -->\r\n\t\t\t\t<button @tap=\"sendtext\">\r\n\t\t\t\t\t<image src=\"../../static/image/send.png\" mode=\"\"></image>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"line\"></view>\r\n\r\n\t\t<view class=\"footer-left\">\r\n\t\t\t<view @touchstart=\"startRecognize\" @touchend=\"endRecognize\" @touchmove=\"move\" class=\"func\">\r\n\t\t\t\t<button><uni-icon type=\"mic-filled\" size=\"30\"></uni-icon></button>\r\n\t\t\t\t<text>语音</text>\r\n\t\t\t</view>\r\n\t\t\t<view @tap=\"image\" class=\"func\">\r\n\t\t\t\t<button> <uni-icon type=\"image\" size=\"30\"></uni-icon></button>\r\n\t\t\t\t<text>图片</text>\r\n\t\t\t</view>\r\n\t\t\t<view @tap=\"video\" class=\"func\">\r\n\t\t\t\t<button ><uni-icon type=\"videocam\" size=\"30\"></uni-icon></button>\r\n\t\t\t\t<text>视频</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view @tap=\"closechat\" class=\"func\">\r\n\t\t\t\t<button > <uni-icon type=\"close\" size=\"30\"></uni-icon></button>\r\n\t\t\t\t<text>结束</text>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport all from '../../common/global.js';\r\n\timport kf from '../../common/kf.js';\r\n\timport uniIcon from '../uni-icon/uni-icon.vue';\r\n\r\n\tconst recorderManager = uni.getRecorderManager();\r\n\texport default {\r\n\t\tname: 'chat-input',\r\n\t\tcomponents: {\r\n\t\t\tuniIcon\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputValue: '',\r\n\t\t\t\tvoice_time: 0,\r\n\t\t\t\tvoice_url: '',\r\n\t\t\t\tvoicePath: '',\r\n\t\t\t\tshow_bar: false,\r\n\t\t\t\tmore_input: true, //多行输入\r\n\t\t\t\tposStart: '', //初始化起点坐标\r\n\t\t\t\tposEnd: '', //初始化终点坐标\r\n\t\t\t\tposMove: '' //初始化滑动坐标\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tlet self = this;\r\n\t\t\trecorderManager.onStop(res => {\r\n\t\t\t\tconsole.log('语音长度', res.duration);\r\n\t\t\t\tconsole.log('起始位置', this.posStart);\r\n\t\t\t\tconsole.log('结束位置', this.posEnd);\r\n\r\n\t\t\t\tif (this.posStart - this.posEnd < 300) {\r\n\t\t\t\t\tif (res.duration > 1500) {\r\n\t\t\t\t\t\tself.voicePath = res.tempFilePath;\r\n\t\t\t\t\t\tthis.voice_time = parseInt(res.duration / 1000);\r\n\t\t\t\t\t\tthis.uploadVoice();\r\n\t\t\t\t\t\tconsole.log('发送成功');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '录制时间太短，请重新录制',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (res.duration > 29000) {\r\n\t\t\t\t\tself.voicePath = res.tempFilePath;\r\n\t\t\t\t\tthis.voice_time = parseInt(res.duration / 1000);\r\n\t\t\t\t\tthis.uploadVoice();\r\n\t\t\t\t\tconsole.log('发送成功');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('取消发送');\r\n\t\t\t\t\tconsole.log('Cancel');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tmore() {\r\n\t\t\t\tthis.more_input = !this.more_input;\r\n\t\t\t},\r\n\t\t\t//结束聊天\r\n\t\t\tclosechat() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否结束咨询',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet text = {\r\n\t\t\t\t\t\t\t\tstr: '00040',\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\tcontent: '本次咨询已结束'\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.sendMessge(text);\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '取消结束',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tasync video() {\r\n\t\t\t\tlet url = await kf.qi_niu_video();\r\n\t\t\t\tlet video = {\r\n\t\t\t\t\tstr: '00070',\r\n\t\t\t\t\ttype: 'video',\r\n\t\t\t\t\tcontent: url\r\n\t\t\t\t};\r\n\t\t\t\tthis.sendMessge(video);\r\n\t\t\t},\r\n\t\t\tasync image() {\r\n\t\t\t\tlet res = await kf.qi_niu_image();\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tfor (let i = 0; i < res.length; i++) {\r\n\t\t\t\t\tlet image = {\r\n\t\t\t\t\t\tstr: '00063',\r\n\t\t\t\t\t\ttype: 'picture',\r\n\t\t\t\t\t\tcontent: res[i].imageURL\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.sendMessge(image);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync uploadVoice() {\r\n\t\t\t\tlet url = await kf.qi_niu_voice(this.voicePath); //最终到七牛上的voice_url\r\n\t\t\t\tlet voice = {\r\n\t\t\t\t\tstr: '00064',\r\n\t\t\t\t\ttype: 'voice',\r\n\t\t\t\t\tcontent: this.voice_time + url\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.sendMessge(voice);\r\n\t\t\t},\r\n\t\t\tstartRecognize(e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '滑动到此处 取消录音',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 900000\r\n\t\t\t\t});\r\n\t\t\t\tthis.posStart = e.pageY;\r\n\t\t\t\t//获取麦克风权限\r\n\t\t\t\tuni.authorize({\r\n\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tconsole.log('开始录音');\r\n\t\t\t\t\t\trecorderManager.start({\r\n\t\t\t\t\t\t\tduration: 30000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log('没授权');\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '没有麦克风权限，按确定进入设置页面，打开麦克风权限，方可使用语音功能',\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.authSetting);\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tendRecognize(e) {\r\n\t\t\t\tthis.posEnd = e.mp.changedTouches[0].pageY; //获取终点坐标\r\n\t\t\t\tconsole.log('结束位置', this.posEnd);\r\n\t\t\t\trecorderManager.stop();\r\n\t\t\t\tuni.hideToast();\r\n\t\t\t},\r\n\r\n\t\t\tsendtext() {\r\n\t\t\t\tlet text;\r\n\t\t\t\tif (this.inputValue.trim() == '') {\r\n\t\t\t\t\tthis.inputValue = '';\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '输入内容不能为空',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//点击发送按钮时，通知父组件用户输入的内容\r\n\t\t\t\t\ttext = {\r\n\t\t\t\t\t\tstr: '00029',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tcontent: this.inputValue\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.sendMessge(text);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendMessge(msg) {\r\n\t\t\t\t//点击发送按钮时，通知父组件用户输入的内容\r\n\t\t\t\tthis.$emit('send-message', {\r\n\t\t\t\t\tstr: msg.str,\r\n\t\t\t\t\ttype: msg.type,\r\n\t\t\t\t\tcontent: msg.content\r\n\t\t\t\t});\r\n\t\t\t\tthis.inputValue = '';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.line{\r\n\t\theight: 1upx;\r\n\t\tbackground: #CECECE;\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 10upx;\r\n\t}\r\n\t\r\n\t.foot {\r\n\t\tborder: 2upx none #d6d6d6;\r\n\t}\r\n\r\n\t.com {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\twidth: 100%;\r\n\t\tpadding-left: 20upx;\r\n\t\tmargin-bottom: 20upx;\r\n\t\tmargin-top: 10upx;\r\n\t}\r\n\r\n\t.footer-left {\r\n\t\twidth: 80upx;\r\n\t\theight: 80upx;\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 60upx;\r\n\t\tfont-size: 25upx;\r\n\t\t\r\n\t}\r\n\t\r\n\t.footer-left text{\r\n\t\tpadding-left: 30upx;\r\n\t}\r\n\t\r\n\t.func {\r\n\t\tmargin-left: 60upx;\r\n\t}\r\n\r\n\t/* .com textarea {\r\n\tbackground: #ffffff;\r\n\tborder: 2upx solid #d6d6d6;\r\n\tmargin-top: 20upx;\r\n\twidth: 550upx;\r\n\tfont-size: 35upx;\r\n} */\r\n\t.com input {\r\n\t\tbackground: #ffffff;\r\n\t\tborder: 2upx solid #d6d6d6;\r\n\t\tmin-height: 1.7rem;\r\n\t\twidth: 500upx;\r\n\t\tfont-size: 28upx;\r\n\t\tborder-radius: 20upx;\r\n\t\tpadding-left: 20upx;\r\n\t}\r\n\r\n\t.com button {\r\n\t\tborder: 1upx solid darkgray;\r\n\t\twidth: 150upx;\r\n\t\theight: 70upx;\r\n\t\tmargin-left: 30upx;\r\n\t\tbox-shadow: 5upx 5upx 10upx #c4c4c4;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.com image {\r\n\t\theight: 80upx;\r\n\t\twidth: 80upx;\r\n\t\tmargin-top: -8upx;\r\n\t\tz-index: 3;\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatinput.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatinput.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","import mod from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./im.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Computer projects\\\\Wechat_devtools\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./im.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}